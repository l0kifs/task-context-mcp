# Требования к реализации MCP сервера

## Инструменты MCP сервера

- Создать задачу
- Получить задачи
- Получить задачу
- Обновить задачу
- Создать шаги задачи
- Обновить шаги задачи

### Создать задачу

**Описание:** Создать новую задачу в системе.

**Параметры запроса:**
- `title` (строка, обязательный) - Заголовок задачи.
- `description` (строка, обязательный) - Описание задачи.
- `project_name` (строка, обязательный) - Название проекта, к которому относится задача. Обычно это имя репозитория.
- `steps` (массив объектов, необязательный) - Список шагов, которые нужно выполнить в рамках задачи. Каждый объект шага содержит:
  - `name` (строка, обязательный) - Название шага.
  - `description` (строка, необязательный) - Описание шага.

**Ответ:**
- `task_id` (строка) - Уникальный идентификатор созданной задачи.
- `status` (строка) - Статус операции (например, "success" или "error").
- `message` (строка) - Дополнительное сообщение об операции.

### Получить задачи

**Описание:** Получить список задач в системе.

**Параметры запроса:**
- `project_name` (строка, обязательный) - Название проекта, для которого нужно получить задачи. Обычно это имя репозитория.
- `status` (строка, необязательный) - Фильтр по статусу задачи (например, "open", "in_progress", "closed"). Если не указан, возвращаются все задачи. Может принимать несколько значений, разделённых запятыми.

**Ответ:**
- `tasks` (массив объектов) - Список задач в проекте. Каждый объект задачи содержит:
  - `task_id` (строка) - Уникальный идентификатор задачи.
  - `title` (строка) - Заголовок задачи.
  - `description` (строка) - Описание задачи.
  - `status` (строка) - Статус задачи (например, "open", "in_progress", "closed").
  - `created_at` (строка) - Дата и время создания задачи.
  - `updated_at` (строка) - Дата и время последнего обновления задачи.

### Получить задачу
**Описание:** Получить детали конкретной задачи по её идентификатору.

**Параметры запроса:**
- `task_id` (строка, обязательный) - Уникальный идентификатор задачи.

**Ответ:**
- `task` (объект) - Детали задачи, содержащие:
  - `task_id` (строка) - Уникальный идентификатор задачи.
  - `title` (строка) - Заголовок задачи.
  - `description` (строка) - Описание задачи.
  - `status` (строка) - Статус задачи (например, "open", "in_progress", "closed").
  - `created_at` (строка) - Дата и время создания задачи.
  - `updated_at` (строка) - Дата и время последнего обновления задачи.
  - `steps` (массив объектов) - Список шагов задачи. Каждый объект шага содержит:
    - `step_id` (строка) - Уникальный идентификатор шага.
    - `name` (строка) - Название шага.
    - `description` (строка) - Описание шага.
    - `status` (строка) - Статус шага (например, "pending", "in_progress", "completed", "cancelled").
    - `created_at` (строка) - Дата и время создания шага.
    - `updated_at` (строка) - Дата и время последнего обновления шага.

### Обновить задачу
**Описание:** Обновить детали существующей задачи.

**Параметры запроса:**
- `task_id` (строка, обязательный) - Уникальный идентификатор
- `title` (строка, необязательный) - Новый заголовок задачи.
- `description` (строка, необязательный) - Новое описание задачи.
- `status` (строка, необязательный) - Новый статус задачи (например, "open", "in_progress", "closed").

**Ответ:**
- `status` (строка) - Статус операции (например, "success" или "error").
- `message` (строка) - Дополнительное сообщение об операции.

### Создать шаги задачи
**Описание:** Добавить новые шаги к существующей задаче.

**Параметры запроса:**
- `task_id` (строка, обязательный) - Уникальный идентификатор задачи.
- `steps` (массив объектов, обязательный) - Список шагов, которые нужно добавить к задаче. Каждый объект шага содержит:
  - `name` (строка, обязательный) - Название шага.
  - `description` (строка, необязательный) - Описание шага.

**Ответ:**
- `status` (строка) - Статус операции (например, "success" или "error").
- `message` (строка) - Дополнительное сообщение об операции.

### Обновить шаги задачи
**Описание:** Обновить существующие шаги задачи.

**Параметры запроса:**
- `task_id` (строка, обязательный) - Уникальный идентификатор задачи.
- `steps` (массив объектов, обязательный) - Список шагов, которые нужно обновить. Каждый объект шага содержит:
  - `step_id` (строка, обязательный) - Уникальный идентификатор шага.
  - `name` (строка, необязательный) - Новый заголовок шага.
  - `description` (строка, необязательный) - Новое описание шага.
  - `status` (строка, необязательный) - Новый статус шага (например, "pending", "in_progress", "completed", "cancelled").
  - `result` (строка, необязательный) - Результат выполнения шага.

**Ответ:**
- `status` (строка) - Статус операции (например, "success" или "error").
- `message` (строка) - Дополнительное сообщение об операции.

## Сущности базы данных

- Задача (Task)
  - task_id (уникальный идентификатор, строка)
  - title (строка)
  - description (строка)
  - project_name (строка)
  - status (строка: "open", "in_progress", "closed". При создании по умолчанию "open". При обновлении любого из привязанных шагов в статус "completed" статус задачи меняется на "in_progress", если был "open". Статус задачи меняется на "closed", если все шаги "completed", или "cancelled".)
  - created_at (дата и время. Устанавливается автоматически при создании)
  - updated_at (дата и время. Устанавливается автоматически при каждом обновлении)
  - steps (привязан к шагам через task_id, массив объектов Step)

- Шаг (Step)
  - step_id (уникальный идентификатор, строка)
  - task_id (идентификатор задачи, строка)
  - name (строка)
  - description (строка)
  - status (строка: "pending", "completed", "cancelled". При создании по умолчанию "pending")
  - result (строка. Результат выполнения шага, может быть пустым)
  - created_at (дата и время. Устанавливается автоматически при создании)
  - updated_at (дата и время. Устанавливается автоматически при каждом обновлении)
  - task (привязан к задаче через task_id, объект Task)

